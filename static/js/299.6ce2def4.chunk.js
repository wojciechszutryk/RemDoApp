"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[299],{51540:function(n,e,t){t.d(e,{Z:function(){return u}});var r=t(66934),i=(0,r.ZP)("div",{shouldForwardProp:function(n){return"spacingTop"!==n&&"spacingBottom"!==n}})((function(n){return{display:"flex",alignItems:"center",width:"100%",height:"20px",marginTop:n.spacingTop,marginBottom:n.spacingBottom}})),o=(0,r.ZP)("div",{shouldForwardProp:function(n){return"color"!==n}})((function(n){var e=n.theme,t=n.color;return{flexGrow:1,height:"9px",borderBottom:"2px solid ".concat(e.palette.primary.contrastText),borderColor:e.palette[t||"primary"].contrastText}})),a=(0,r.ZP)("div",{shouldForwardProp:function(n){return"color"!==n}})((function(n){var e=n.theme,t=n.color;return{paddingLeft:"20px",paddingRight:"20px",color:e.palette[t||"primary"].contrastText}})),s=t(80184),u=function(n){var e=n.text,t=n.variant,r=n.spacingBottom,u=n.spacingTop;return(0,s.jsxs)(i,{spacingBottom:r,spacingTop:u,children:[(0,s.jsx)(o,{color:t}),(0,s.jsx)(a,{color:t,children:e}),(0,s.jsx)(o,{color:t})]})}},64694:function(n,e,t){t.d(e,{f:function(){return d}});var r=t(74165),i=t(15861),o=t(12917),a=t(91797),s=t(25983),u=t(86426),c=t(69061),d=function(n){var e=function(){var n=(0,i.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,a.R1)((0,s.o)(c.CU+u.RR)).then((function(n){return n.data}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,o.a)([c.CU+u.RR],e,n)}},97938:function(n,e,t){t.d(e,{Z:function(){return D}});var r=t(1413),i=t(93433),o=t(45987),a=t(29170),s=t(34855),u=t(50525),c=t(85170),d=t(72791),l=t(61134),f=t(39230),p=t(64694),v=t(66934),m=t(81918),x=t(25286),h=(0,v.ZP)(m.Z)((function(n){var e=n.theme;return{zIndex:1,backgroundColor:e.palette.primary.main,color:e.palette.secondary.contrastText,margin:"0 2px"}})),g=(0,v.ZP)(x.Z)({"& .MuiFormControl-root":{height:"unset"}}),Z=t(80184),j=["name","defaultValues"],w=function(n){var e=n.name,t=n.defaultValues,v=(0,o.Z)(n,j),m=(0,f.$G)().t,x=(0,l.qo)(),w=(0,l.Gc)().setValue,D=x[e],y=(0,s.x)().currentUser,b=(0,p.f)(),C=(0,d.useMemo)((function(){var n,e=new Set;return null===(n=b.data)||void 0===n||n.forEach((function(n){n.state===c.X.Accepted&&(e.add(n.creator.email),e.add(n.user.email))})),Array.from(e)}),[b.data]),R=(0,d.useMemo)((function(){return Array.from(new Set([].concat((0,i.Z)(C),(0,i.Z)(t.map((function(n){return n.email}))))))}),[C,t]),S=(0,d.useMemo)((function(){var n,e=new Map;return null===(n=b.data)||void 0===n||n.forEach((function(n){n.state===c.X.Accepted&&(e.set(n.creator.email,n.creator),e.set(n.user.email,n.user))})),t.forEach((function(n){e.set(n.email,n)})),e}),[t,b.data]),I=null===D||void 0===D?void 0:D.map((function(n){return n.email}));return(0,Z.jsx)(g,(0,r.Z)((0,r.Z)({},v),{},{renderTags:function(){return null===D||void 0===D?void 0:D.map((function(n,t){return(0,Z.jsx)(h,{label:n.email,disabled:n.email===(null===y||void 0===y?void 0:y.email)||!(!n.email||C.includes(n.email)),onDelete:function(){var t=null===D||void 0===D?void 0:D.filter((function(e){return e!==n}));w(e,t)}},t)}))},multiple:!0,options:R.filter((function(n){return!(null!==I&&void 0!==I&&I.includes(n))})),onChange:function(n,t){var r=[];t.forEach((function(n){var e=S.get(n);e&&r.push(e)})),w(e,r)},defaultValue:t.map((function(n){return n.email})),renderInput:function(n){return(0,Z.jsx)(a.n,(0,r.Z)((0,r.Z)({},n),{},{InputLabelProps:void 0}))},noOptionsText:m(u.w.NoCollaborantOption)}))},D=(0,d.memo)(w)},32299:function(n,e,t){t.r(e),t.d(e,{default:function(){return ln}});var r=t(1413),i=t(29439),o=t(81131),a=t(41368),s=t(95857),u=t(51911),c=t(55818),d=t(20068),l=t(20890),f=t(3721),p=t(1638),v=t(41178),m=t(16606),x=t(51540),h=t(9685),g=t(94141),Z=t(97892),j=t.n(Z),w=t(65762),D=t(14398),y=t(38153),b=t(50525),C=t(74165),R=t(15861),S=t(73418),I=t(91797),P=t(25983),T=t(87050),k=t(56607),O=t(96403),M=t(33704),B=t(72791),E=function(){var n=(0,O.NL)();return(0,B.useCallback)((function(e){n.setQueryData((0,M.S)(e.startDate),(function(n){if(!n)return new Map;var t=new Map(n.entries());return t.set(e.taskId,e),t}))}),[n])},G=t(27983),L=t(61134),A=t(39230),V=t(15853),q=t(53201),N=t(42027),U=t(97938),z=t(80184),F=function(){var n=(0,L.qo)(),e=(0,A.$G)().t,t=n.startDate,r=n.finishDate,i={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"};return(0,z.jsxs)(z.Fragment,{children:[t&&(0,z.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,z.jsxs)("span",{children:[e(b.w.StartDate),":"]}),(0,z.jsx)("strong",{style:{fontWeight:800},children:new Date(t).toLocaleString("pl-PL",i)})]}),r&&(0,z.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,z.jsxs)("span",{children:[e(b.w.FinishDate),":"]}),(0,z.jsx)("strong",{style:{fontWeight:800},children:new Date(r).toLocaleString("pl-PL",i)})]})]})},J=(0,B.memo)(F),H=t(93433),W=t(84206),$=t(23786),Q=t(57064),X=t(49900),K=t(98195),Y=t(61428),_=t(4942),nn=t(12917),en=t(35362),tn=t(47797),rn=function(){var n=function(n){var e=function(){var e=(0,R.Z)((0,C.Z)().mark((function e(){return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.R1)((0,P.o)(en.kJ,"",n?(0,_.Z)({},en.Fq,"true"):void 0)).then((function(n){return n.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,nn.a)([en.kJ,n?en.Fq:""],e)}(!0),e=(0,A.$G)().t,t=(0,B.useMemo)((function(){var e,t=new Map;return null===(e=n.data)||void 0===e||e.forEach((function(n){t.set(n.id,{name:n.name,members:Array.from(new Set([].concat((0,H.Z)(n.assignedOwners.map((function(n){return n.displayName}))),(0,H.Z)(n.assignedUsers.map((function(n){return n.displayName})))))).join(", ")})})),t}),[n.data]);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{text:e(b.w.ScopeChoose),spacingBottom:15}),(0,z.jsx)(L.Qr,{name:"todoListId",render:function(r){var i,o,a=r.field,s=a.onChange,u=a.value;return(0,z.jsxs)(N.Wf,{style:{height:"54px"},children:[!u||"reminder"===u&&(0,z.jsx)(tn.Z,{}),(0,z.jsxs)(K.P,{label:e(b.w.Reminder),value:u,renderValue:function(n){var r;return(null===(r=t.get(n))||void 0===r?void 0:r.name)||e(b.w.Reminder)},onChange:function(n){var e;s(null===(e=n.target)||void 0===e?void 0:e.value)},children:[(0,z.jsxs)($.Z,{value:"reminder",children:[(0,z.jsx)(Q.Z,{children:(0,z.jsx)(W.Z,{color:"secondary"})}),(0,z.jsx)(X.Z,{secondaryTypographyProps:{style:{whiteSpace:"normal"}},primary:e(b.w.Reminder),secondary:e(b.w.ReminderInfo)})]},"reminder"),(0,z.jsx)(x.Z,{text:e(b.w.OrChooseTodoList)}),null!==(i=null===(o=n.data)||void 0===o?void 0:o.map((function(n){var e;return(0,z.jsxs)($.Z,{value:n.id,children:[(0,z.jsx)(Q.Z,{children:(0,z.jsx)(Y.Z,{type:n.icon})}),(0,z.jsx)(X.Z,{primaryTypographyProps:{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},secondaryTypographyProps:{style:{whiteSpace:"normal"}},primary:n.name,secondary:(null===(e=t.get(n.id))||void 0===e?void 0:e.members)||""})]},n.id)})))&&void 0!==i?i:[]]})]})}})]})},on=(0,B.memo)(rn),an=t(62683),sn=t(66355),un=function(n,e){var t,r,i,o=null!==(t=null===n||void 0===n?void 0:n.startDate)&&void 0!==t?t:null===e||void 0===e?void 0:e.startDate,a=null!==(r=null===n||void 0===n?void 0:n.notifyDate)&&void 0!==r?r:null===e||void 0===e?void 0:e.notifyDate,s=a?new Date(a):o?new Date(new Date(o).getTime()-9e5):null,u=null!==(i=null===n||void 0===n?void 0:n.finishDate)&&void 0!==i?i:null===e||void 0===e?void 0:e.finishDate,c=s?(0,sn.R)(new Date(s),o&&new Date(o),u&&new Date(u)):null;return{text:(null===n||void 0===n?void 0:n.text)||(null===e||void 0===e?void 0:e.text)||"",name:(null===n||void 0===n?void 0:n.name)||(null===e||void 0===e?void 0:e.name)||"",icon:(null===n||void 0===n?void 0:n.icon)||(null===e||void 0===e?void 0:e.icon)||an.J.Reminder,startDate:(null===n||void 0===n?void 0:n.startDate)||(null===e||void 0===e?void 0:e.startDate)||j()().toDate(),finishDate:(null===n||void 0===n?void 0:n.finishDate)||(null===e||void 0===e?void 0:e.finishDate)||j()().add(1,"hour").toDate(),assignedOwners:(null===n||void 0===n?void 0:n.assignedOwners)||(null===e||void 0===e?void 0:e.assignedOwners)||[],assignedUsers:(null===n||void 0===n?void 0:n.assignedUsers)||(null===e||void 0===e?void 0:e.assignedUsers)||[],todoListId:(null===n||void 0===n?void 0:n.todoListId)||(null===e||void 0===e?void 0:e.todoListId)||"reminder",notify:!!a,minsAccordingToTimePoint:(null===c||void 0===c?void 0:c.minsAccordingToTimePoint)||15,beforeOrAfter:(null===c||void 0===c?void 0:c.beforeOrAfter)||"Before",timePoint:(null===c||void 0===c?void 0:c.timePoint)||"Start",notifyDate:s}},cn=(0,t(66934).ZP)(s.Z)({transform:"translateY(-4px)",marginRight:"3px"}),dn=function(){var n=(0,w.q)(),e=n.dialogsState.reminderDialog,t=e.editReminderData,Z=e.visible,O=e.defaultData,M=n.dialogsActions.updateReminderDialog,F=function(){var n=E(),e=function(){var n=(0,R.Z)((0,C.Z)().mark((function n(e){var t;return(0,C.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=(0,P.o)(T.cB),n.abrupt("return",(0,I.sg)(t,(0,k.J)(e)).then((function(n){return n.data})));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,S.D)(e,{onSuccess:n})}(),H=(0,G.O)(),W=(0,A.$G)().t,$=(0,D.Z)(Z,(function(){return M(y.g2)})),Q=(0,i.Z)($,2),X=Q[0],K=Q[1],Y=(0,B.useState)("general"),_=(0,i.Z)(Y,2),nn=_[0],en=_[1],tn=function(n){return function(){en(nn===n?"":n)}},rn=un(O,t),an=(0,L.cI)({defaultValues:rn}),sn=function(n){var e=n.assignedOwners.map((function(n){return n.email})),i=n.assignedUsers.map((function(n){return n.email}));if(t)H.mutate({todoListId:t.todoListId,taskId:t.taskId,data:(0,r.Z)((0,r.Z)({},n),{},{assignedOwners:e,assignedUsers:i})});else{if(!n.startDate||!n.finishDate||!n.text||!n.icon)return;var o=(0,r.Z)((0,r.Z)({},n),{},{assignedOwners:e,assignedUsers:i,text:n.text,name:n.text,icon:n.icon,startDate:n.startDate,finishDate:n.finishDate});F.mutate(o)}M(y.g2),K()};return(0,z.jsx)(m.Z,{open:X,onClose:K,children:(0,z.jsxs)(L.RV,(0,r.Z)((0,r.Z)({},an),{},{children:[(0,z.jsxs)(p.s,{expanded:"general"===nn,onChange:tn("general"),disableGutters:!0,children:[(0,z.jsxs)(c.Z,{expandIcon:(0,z.jsx)(o.Z,{}),children:[(0,z.jsx)(d.Z,{title:W(b.w.GeneralInfoReminderDescription),children:(0,z.jsx)("div",{children:(0,z.jsx)(s.Z,{sx:{marginRight:"3px"}})})}),(0,z.jsx)(l.Z,{children:W(b.w.GeneralInfo)})]}),(0,z.jsx)(f.Z,{children:(0,z.jsxs)(N.Gq,{onSubmit:an.handleSubmit(sn),children:[(0,z.jsx)(x.Z,{text:t?"".concat(W(b.w.EditReminder),": ").concat(t.text):W(b.w.CreateReminder),spacingBottom:15,spacingTop:-5}),(0,z.jsx)(g.M,{name:"name",required:!0,control:an.control,placeholder:W(b.w.ReminderName)}),(0,z.jsx)(g.M,{name:"text",required:!0,control:an.control,placeholder:W(b.w.ReminderDescription)}),[{Icon:(0,z.jsx)(u.Z,{}),tooltipTitle:W(b.w.StartDate),name:"startDate",required:!0,control:an.control,maxDate:j()(an.getValues("startDate"))},{Icon:(0,z.jsx)(a.Z,{}),tooltipTitle:W(b.w.FinishDate),name:"finishDate",required:!0,control:an.control,minDate:j()(an.getValues("finishDate"))}].map((function(n,e){return(0,z.jsx)(V.Z,(0,r.Z)({},n),e)}))]})})]}),!t&&(0,z.jsxs)(p.s,{expanded:"scope"===nn,onChange:tn("scope"),disableGutters:!0,children:[(0,z.jsxs)(c.Z,{expandIcon:(0,z.jsx)(o.Z,{}),children:[(0,z.jsx)(d.Z,{title:W(b.w.ScopeDescription),children:(0,z.jsx)("div",{children:(0,z.jsx)(cn,{})})}),W(b.w.ScopeChoose)]}),(0,z.jsx)(f.Z,{children:(0,z.jsx)(on,{})})]}),(0,z.jsxs)(p.s,{expanded:"access"===nn,onChange:tn("access"),disableGutters:!0,children:[(0,z.jsxs)(c.Z,{expandIcon:(0,z.jsx)(o.Z,{}),children:[(0,z.jsx)(d.Z,{title:W(b.w.ManageAccessReminderDescription),children:(0,z.jsx)("div",{children:(0,z.jsx)(cn,{})})}),W(b.w.ManageAccess)]}),(0,z.jsx)(f.Z,{children:(0,z.jsxs)(N.Gq,{children:[(0,z.jsx)(x.Z,{text:W(b.w.ManageAccess),spacingBottom:-5,spacingTop:-5}),(0,z.jsx)(l.Z,{children:W(b.w.CurrentOwners)}),(0,z.jsx)(U.Z,{name:"assignedOwners",defaultValues:null===rn||void 0===rn?void 0:rn.assignedOwners}),(0,z.jsx)(l.Z,{children:W(b.w.CurrentUsers)}),(0,z.jsx)(U.Z,{name:"assignedUsers",defaultValues:null===rn||void 0===rn?void 0:rn.assignedUsers})]})})]}),(0,z.jsxs)(p.s,{expanded:"notify"===nn,onChange:tn("notify"),disableGutters:!0,children:[(0,z.jsxs)(c.Z,{expandIcon:(0,z.jsx)(o.Z,{}),children:[(0,z.jsx)(d.Z,{title:W(b.w.SetNotificationDescription),children:(0,z.jsx)("div",{children:(0,z.jsx)(cn,{})})}),W(b.w.SetNotification)]}),(0,z.jsx)(f.Z,{children:(0,z.jsxs)(N.Gq,{children:[(0,z.jsx)(x.Z,{text:W(b.w.SetNotification),spacingBottom:5,spacingTop:-5}),(0,z.jsx)(J,{}),(0,z.jsx)(h.x,{name:"notify",control:an.control,label:W(b.w.NotifyMe)}),(0,z.jsx)(q.Z,{control:an.control})]})})]}),(0,z.jsx)(v.z,{onClick:an.handleSubmit(sn),sx:{margin:"0 auto"},children:W(t?b.w.Save:b.w.CreateReminder)})]}))})},ln=(0,B.memo)(dn)},47797:function(n,e,t){t.d(e,{Z:function(){return m}});var r=t(29439),i=t(13400),o=t(62683),a=t(61428),s=t(72791),u=t(61134),c=t(66934),d=t(15473),l=(0,c.ZP)("div")((function(n){return{display:"flex",flexWrap:"wrap",gap:"10px",padding:10,borderRadius:10,background:n.theme.palette.primary.main}})),f=(0,c.ZP)(d.ZP)((function(n){return{"& .MuiPopover-paper":{borderRadius:10,background:n.theme.palette.primary.main}}})),p=t(80184),v=function(){var n=(0,s.useState)(null),e=(0,r.Z)(n,2),t=e[0],c=e[1],d=(0,u.Gc)(),v=d.setValue,m=d.getValues,x=function(){return c(null)};return(0,p.jsxs)("div",{children:[(0,p.jsx)(i.Z,{onClick:function(n){c(n.currentTarget)},children:(0,p.jsx)(a.Z,{type:m("icon")})}),(0,p.jsx)(f,{open:Boolean(t),anchorEl:t,onClose:x,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,p.jsx)(l,{children:Object.values(o.J).map((function(n){return(0,p.jsx)(a.Z,{type:n,onClick:function(){v("icon",n),x()}},n)}))})})]})},m=(0,s.memo)(v)},33704:function(n,e,t){t.d(e,{S:function(){return a}});var r=t(97892),i=t.n(r),o=t(87050),a=function(n){return[o.cB,i()(n).year(),i()(n).month()]}},27983:function(n,e,t){t.d(e,{O:function(){return x}});var r=t(74165),i=t(15861),o=t(73418),a=t(91797),s=t(25983),u=t(87050),c=t(56607),d=t(38086),l=t(35362),f=t(96403),p=t(33704),v=t(72791),m=function(){var n=(0,f.NL)();return(0,v.useCallback)((function(e){n.setQueryData((0,p.S)(e.startDate),(function(n){if(!n)return new Map;var t=new Map(n.entries());return t.set(e.taskId,e),t}))}),[n])},x=function(){var n=m(),e=function(){var n=(0,i.Z)((0,r.Z)().mark((function n(e){var t,i,o;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.todoListId,i=e.taskId,o=e.data,n.abrupt("return",(0,a.pE)((0,s.o)(l.kJ+(0,l.qB)(t)+u.cB+(0,d.p8)(i)),(0,c.J)(o)).then((function(n){return n.data})));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,o.D)(e,{onSuccess:n})}},85170:function(n,e,t){t.d(e,{X:function(){return r}});var r=function(n){return n.Pending="PENDING",n.Accepted="ACCEPTED",n.Rejected="REJECTED",n.ReOpened="REOPENED",n.Blocked="BLOCKED",n}({})},86426:function(n,e,t){t.d(e,{AK:function(){return o},RR:function(){return r},d:function(){return a},np:function(){return i},oy:function(){return s}});var r="/collaborants",i=function(n){return"/".concat(n||":collaborationId")},o="/inviteCollaborant",a="/reject",s="/accept"},87050:function(n,e,t){t.d(e,{cB:function(){return o},oM:function(){return r},oe:function(){return i}});var r="startDate",i="endDate",o="/reminders"},84206:function(n,e,t){var r=t(64836);e.Z=void 0;var i=r(t(45649)),o=t(80184),a=(0,i.default)((0,o.jsx)("path",{d:"M12 22H5c-1.11 0-2-.9-2-2l.01-14c0-1.1.88-2 1.99-2h1V2h2v2h8V2h2v2h1c1.1 0 2 .9 2 2v6h-2v-2H5v10h7v2zm10.13-5.01.71-.71c.39-.39.39-1.02 0-1.41l-.71-.71a.9959.9959 0 0 0-1.41 0l-.71.71 2.12 2.12zm-.71.71-5.3 5.3H14v-2.12l5.3-5.3 2.12 2.12z"}),"EditCalendar");e.Z=a},95857:function(n,e,t){var r=t(64836);e.Z=void 0;var i=r(t(45649)),o=t(80184),a=(0,i.default)((0,o.jsx)("path",{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"}),"HelpOutline");e.Z=a}}]);
//# sourceMappingURL=299.6ce2def4.chunk.js.map