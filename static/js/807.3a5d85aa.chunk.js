"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[807],{20807:function(t,n,i){i.r(n),i.d(n,{default:function(){return M}});var o=i(1413),e=i(29439),r=i(41368),a=i(51911),u=i(20890),s=i(41178),d=i(16606),c=i(9685),l=i(94141),f=i(97892),v=i.n(f),m=i(65762),Z=i(14398),D=i(38153),p=i(50525),k=i(74165),x=i(15861),h=i(73418),w=i(91797),y=i(25983),j=i(56607),I=i(38086),b=i(93433),T=i(96403),L=i(34855),g=i(35362),S=i(72791),A=i(57689),J=function(t){var n=(0,T.NL)(),i=(0,L.x)().currentUser,e=(0,A.UO)().todoListId;return(0,S.useCallback)((function(r){var a=(0,o.Z)((0,o.Z)({},r),{},{creator:i});e&&!t&&n.setQueryData([g.kJ,(0,g.qB)(e),g.sF],(function(t){return t?(0,o.Z)((0,o.Z)({},t),{},{tasks:[].concat((0,b.Z)(t.tasks),[a])}):{}})),n.setQueryData([g.kJ,g.sF],(function(t){if(!t)return[];var n=t.find((function(t){return t.id===r.todoListId}));if(!n)return t;var i=(0,o.Z)((0,o.Z)({},n),{},{tasks:[].concat((0,b.Z)(n.tasks),[a])});return t.map((function(t){return t.id===i.id?i:t}))}))}),[i,n,e])},q=i(22099),C=i(61134),F=i(39230),O=i(42027),P=i(56125),N=i(53201),Q=i(80184),B=function(t){var n=t.control,i=(0,C.qo)();return(0,Q.jsx)(P.Z,{in:i.notify,timeout:"auto",unmountOnExit:!0,children:(0,Q.jsx)(N.Z,{control:n})})},E=(0,S.memo)(B),R=i(15853),U=i(66355),V=(0,i(66934).ZP)("div")({display:"flex"}),G=function(){var t=(0,m.q)(),n=t.dialogsState.taskDialog,i=n.editTaskData,f=n.todoListId,b=n.visible,T=t.dialogsActions.updateTaskDialog,L=(0,Z.Z)(b,(function(){return T(D.g2)})),g=(0,e.Z)(L,2),S=g[0],A=g[1],P=(null===i||void 0===i?void 0:i.notifyDate)&&(0,U.R)(new Date(null===i||void 0===i?void 0:i.notifyDate),(null===i||void 0===i?void 0:i.startDate)&&new Date(null===i||void 0===i?void 0:i.startDate),(null===i||void 0===i?void 0:i.finishDate)&&new Date(null===i||void 0===i?void 0:i.finishDate)),N={text:(null===i||void 0===i?void 0:i.text)||"",startDate:(null===i||void 0===i?void 0:i.startDate)||null,finishDate:(null===i||void 0===i?void 0:i.finishDate)||null,minsAccordingToTimePoint:(null===P||void 0===P?void 0:P.minsAccordingToTimePoint)||15,beforeOrAfter:(null===P||void 0===P?void 0:P.beforeOrAfter)||"Before",timePoint:(null===P||void 0===P?void 0:P.timePoint)||"Start",notifyDate:(null===i||void 0===i?void 0:i.notifyDate)||new Date,important:null===i||void 0===i?void 0:i.important,notify:!(null===i||void 0===i||!i.notifyDate)},B=(0,C.cI)({defaultValues:N}),G=function(){var t=J(),n=function(){var t=(0,x.Z)((0,k.Z)().mark((function t(n,i){var o;return(0,k.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=(0,y.o)((0,I.Ri)(n)),t.abrupt("return",(0,w.sg)(o,(0,j.J)(i)).then((function(t){return t.data})));case 2:case"end":return t.stop()}}),t)})));return function(n,i){return t.apply(this,arguments)}}();return(0,h.D)((function(t){var i=t.todoListId,o=t.data;return n(i,o)}),{onSuccess:t})}(),M=(0,q.y)(),z=(0,F.$G)().t,X=B.handleSubmit,$=B.control,H=B.getValues;return(0,Q.jsx)(d.Z,{open:S,onClose:A,children:(0,Q.jsx)(C.RV,(0,o.Z)((0,o.Z)({},B),{},{children:(0,Q.jsxs)(O.Gq,{onSubmit:X((function(t){i?M.mutate({todoListId:f,taskId:i.id,data:t}):G.mutate({todoListId:f,data:t}),A()})),children:[(0,Q.jsx)(u.Z,{variant:"h4",children:i?"".concat(z(p.w.EditTask),": ").concat(i.text):z(p.w.AddTask)}),(0,Q.jsx)(l.M,{name:"text",control:$,placeholder:z(p.w.TaskName)}),[{Icon:(0,Q.jsx)(a.Z,{}),tooltipTitle:z(p.w.StartDate),name:"startDate",control:$,maxDate:v()(H("startDate"))},{Icon:(0,Q.jsx)(r.Z,{}),tooltipTitle:z(p.w.FinishDate),name:"finishDate",control:$,minDate:v()(H("finishDate"))}].map((function(t,n){return(0,Q.jsx)(R.Z,(0,o.Z)({},t),n)})),(0,Q.jsxs)(V,{children:[(0,Q.jsx)(c.x,{name:"notify",control:$,label:z(p.w.NotifyMe)}),(0,Q.jsx)(c.x,{name:"important",control:$,label:z(p.w.TaskImportant)})]}),(0,Q.jsx)(E,{control:B.control}),(0,Q.jsx)(s.z,{type:"submit",children:z(i?p.w.Save:p.w.AddTask)})]})}))})},M=(0,S.memo)(G)},22099:function(t,n,i){i.d(n,{y:function(){return D}});var o=i(74165),e=i(15861),r=i(73418),a=i(91797),u=i(25983),s=i(56607),d=i(38086),c=i(1413),l=i(96403),f=i(35362),v=i(72791),m=i(57689),Z=function(){var t=(0,l.NL)(),n=(0,m.UO)().todoListId;return(0,v.useCallback)((function(i,o){var e=o.todoListId;n&&t.setQueryData([f.kJ,(0,f.qB)(n),f.sF],(function(t){return t?(0,c.Z)((0,c.Z)({},t),{},{tasks:t.tasks.map((function(t){return t.id===i.id?(0,c.Z)((0,c.Z)({},t),i):t}))}):{}})),t.setQueryData([f.kJ,f.sF],(function(t){if(!t)return[];var n=t.find((function(t){return t.id===e}));if(!n)return t;var o=(0,c.Z)((0,c.Z)({},n),{},{tasks:n.tasks.map((function(t){return t.id===i.id?(0,c.Z)((0,c.Z)({},t),i):t}))});return t.map((function(t){return t.id===o.id?o:t}))}))}),[t,n])},D=function(){var t=Z(),n=function(){var t=(0,e.Z)((0,o.Z)().mark((function t(n){var i,e,r;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.todoListId,e=n.taskId,r=n.data,t.abrupt("return",(0,a.pE)((0,u.o)((0,d.Xw)(i,e)),(0,s.J)(r)).then((function(t){return t.data})));case 2:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}();return(0,r.D)(n,{onSuccess:t})}}}]);
//# sourceMappingURL=807.3a5d85aa.chunk.js.map